<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 이름을 정해줘!</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="../static/js/main.js"></script>
    <link rel="stylesheet" href="../static/css/common.css">
    <link rel="stylesheet" href="../static/css/main.css">


</head>
<script>
    $(document).ready(function() {

        $("input[id=ex_input]").keyup(function (event) {

            regexp = /[a-z0-9]|[ \[\]{}()<>?|`~!@#$%^&*-_+=,.;:\"'\\]/g;
            v = $(this).val();
            if (regexp.test(v)) {
                alert("한글만 해줄거야!");
                $(this).val(v.replace(regexp, ''));
            }
        });
    })

    function get_mynick () {
            $.ajax({
                    type: "GET",
                    url: "/get_mynick",
                    data: {},
                    success: function (response) {
                        let noun_words = new Array();
                        let adj_words = new Array();
                        let animal_words = new Array();
                        let fruits_words = new Array();

                        let a = 0
                        let b = 0
                        let c = 0
                        let d = 0


                        let nickname = response['all_nickname']


                        for (let i = 0; i < nickname.length; i++) {

                            let words_a = nickname[i]['word']
                            let type = nickname[i]['class']

                            if (type == 'adj') {
                                a += 1
                                adj_words[a]=words_a;
                            } else if(type == 'noun') {
                                b += 1
                                noun_words[b]=words_a;
                            } else if(type == 'animal') {
                                c += 1
                                animal_words[c]=words_a;
                            } else {
                                d += 1
                                fruits_words[d]=words_a;
                            }
                        }

                        let target = $('.on').html()
                        if (target == '형용사') {
                            let wish_adj = $('#ex_input').val()
                            if (wish_adj != '') {
                                let ran_noun_num = Math.floor(Math.random() * 25416 + 1);
                                console.log(wish_adj, noun_words[ran_noun_num])
                                window.location.href="/show_myname";
                            } else {
                                alert('형용사를 입력해줘!')
                            }
                        } else if(target == '명사') {
                            let wish_noun = $('#ex_input').val()
                            if (wish_noun != '') {
                                let ran_adj_num = Math.floor(Math.random() * 181 + 1);
                                console.log(adj_words[ran_adj_num], wish_noun)
                                window.location.href="/show_myname";
                            } else {
                                alert('명사를 입력해줘!')
                            }
                        } else {
                            let ran_adj_num = Math.floor(Math.random() * 181+1);
                            let ran_noun_num = Math.floor(Math.random() * 25416+1);
                            console.log(adj_words[ran_adj_num], noun_words[ran_noun_num]);
                            window.location.href="/show_myname";
                        }


                    }
            })
        }

</script>
<body>
    {% if not token %}

    {% endif %}

    <header>
        <a href="#">마이페이지</a>
    </header>
    <article id="content">
        <section id="character">
            <p class="myName">내 이름을 정해줘!</p>
            <img src="../static/img/CHAR.svg" alt="character image">
        </section>
        <section id="option">
            <div class="assignWord">
                <p>고정단어</p>
                <section>
                    <div class="textInput">
                        <label for="ex_input">형용사를 원해!</label>
                        <input type="text" id="ex_input">
                        <button class="textClear"></button>
                    </div>
                    <div class="wordOption">
                        <p class="on">형용사</p>
                        <span></span>
                        <p class="off">명사</p>
                        <span></span>
                        <p class="off">완전랜덤</p>
                    </div>
                </section>
            </div>
            <div class="maxWord">
                <p>최대글자수</p>
                <section>
                    <form oninput="count.value = parseInt(RangeInput.value)">
                        <input type="range" min="3" max="12" step="" value="5" name="RangeInput">
                        <div>
                            <output name='count' for="RangeInput" class="count">5</output>
                            <p>자</p>
                        </div>
                    </form>
                </section>
            </div>
            <div class='nounOption'>
                <p>명사종류</p>
                <section>
                    <div>
                        <label class="furuit checks">
                            <p>과일</p>
                            <input type="checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </div>
                    <div>
                        <label class="animal checks">
                            <p>동물</p>
                            <input type="checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </div>
                </section>
            </div>
        </section>
        <button onclick="get_mynick()" id="enter">ENTER</button>
    </article>


</body>

</html>